<link rel="import" href="/bower_components/iron-form/iron-form.html"/>
<link rel="import" href="/bower_components/paper-input/paper-input.html"/>
<link rel="import" href="/bower_components/paper-input/paper-textarea.html"/>
<link rel="import" href="/bower_components/paper-button/paper-button.html"/>
<link rel="import" href="/bower_components/star-ratings/star-ratings.html"/>

<style is="custom-style">
    .cardItemContainer h1 {
        font-size: large;
    }

    .cardItemContainer .separator {
        height: 1px;
        background: grey;
    }

    .cardItemContainer .addRatingForm {
        height: auto;
        margin-top: 8px;
    }

    .cardItemContainer ::-webkit-scrollbar {
        width: 5px;
    }
    .cardItemContainer ::-webkit-scrollbar-thumb {
        background: rgba(96, 125, 139,0.7);
        border-radius: 25px;
        box-shadow: inset 0px 1px 1px 1px rgba(38, 50, 56, 0.1);
    }
    .cardItemContainer ::-webkit-scrollbar-thumb:hover {
        background: rgba(96, 125, 139,0.9);
    }
    .cardItemContainer ::-webkit-scrollbar-thumb:active {
        background: rgba(38, 50, 56,0.9);
    }
    .cardItemContainer ::-webkit-scrollbar-track {
        background: rgba(176, 190, 197,0.5);
        border-radius: 25px;
    }
    .cardItemContainer ::-webkit-scrollbar-track:hover {
        background: rgba(176, 190, 197,0.9);
    }
    .cardItemContainer .scroll {
        max-height: 300px;
        overflow-y: auto;
    }

</style>

<article class="cardItemContainer">
    <h1>Average rating: {{averageRating(location.ratings)}}</h1>
    <div class="scroll">
        <article ng-repeat="rating in location.ratings track by $index">
            <p> {{rating.value}}/5 -- {{rating.user}} </p>
            <p> {{rating.comment !== 'Comment' ? rating.comment : ''}}</p>
            <div class="separator"></div>
        </article>
    </div>

    <form id="{{location.id + '_ratingForm'}}" class="addRatingForm"
          is="iron-form" ng-keypress="keyPressed($event)">
        <h4>Rate it</h4>
        <star-ratings name="rating" class="starInput" value="1" count="5" required></star-ratings>

        <paper-input name="user" label="User" error-message="Need to provide your name!"
                     required auto-validate></paper-input>
        <paper-textarea name="comment" label="Comment" maxlength="500" error-message="500 characters or less please!"
                     auto-validate></paper-textarea>
        <paper-button type="submit" ng-click="submitRatingForm();">Rate!</paper-button>
    </form>
</article>